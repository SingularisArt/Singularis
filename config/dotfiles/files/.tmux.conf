#  __  __         _____                       ____             __
# |  \/  |_   _  |_   _| __ ___  _   ___  __ / ___|___  _ __  / _|
# | |\/| | | | |   | || '_ ` _ \| | | \ \/ /| |   / _ \| '_ \| |_
# | |  | | |_| |  _| || | | | | | |_| |>  < | |__| (_) | | | |  _|
# |_|  |_|\__, | (_)_||_| |_| |_|\__,_/_/\_(_)____\___/|_| |_|_|
#         |___/

#######################################################################
#                                                                     #
#                               Colors                                #
#                                                                     #
#######################################################################

color_red="#BF616A"
color_orange="#d08770"
color_yellow="#EBCB8B"
color_green="#A3BE8C"
color_magenta="#B48EAD"
color_blue="#81A1C1"
color_cyan="#88C0D0"
color_fg="#ECEFF4"
color_bg="#2e3440"
color_grey1="#f8fafc"
color_grey2="#f0f1f4" 
color_grey3="#eaecf0"
color_grey4="#d9dce3"
color_grey5="#c4c9d4"
color_grey6="#b5bcc9"
color_grey7="#929cb0"
color_grey8="#8e99ae"
color_grey9="#74819a"
color_grey10="#616d85"
color_grey11="#464f62"
color_grey12="#3a4150"
color_grey13="#333a47"
color_grey14="#242932"
color_grey15="#1e222a"
color_grey16="#1c1f26"
color_grey17="#0f1115"
color_grey18="#0d0e11"
color_grey19="#020203" 

#######################################################################
#                                                                     #
#                               Options                               #
#                                                                     #
#######################################################################

set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",xterm-256color:Tc"
set -g pane-border-style bg=$color_bg,fg=$color_grey14
set -g pane-active-border-style bg=$color_bg,fg=$color_grey14
set -g mode-keys vi
set -g mouse on
set -g escape-time 0
set -g focus-events on
set -g history-limit 3000
set -g base-index 1
set -g pane-base-index 1
set -g -w automatic-rename on
set -g renumber-windows on
set -g bell-action none
set -g status-keys vi

set-option -g set-titles-string "#S > #T"

#######################################################################
#                                                                     #
#                              Bindings                               #
#                                                                     #
#######################################################################

bind -n C-f run-shell "tmux neww ~/.local/bin/tmux-sessionizer"
bind-key | split-window -h -c '#{pane_current_path}' # normally prefix-%
bind-key '\' split-window -h -c '#{pane_current_path}' # normally prefix-%
bind-key - split-window -v -c '#{pane_current_path}' # normally prefix-"
bind-key y run-shell "tmux save-buffer - | clip"
bind-key -T copy-mode-vi Enter send-keys -X copy-pipe-and-cancel "clip"
bind-key C-l clear-history

# Smart pane switching with awareness of Vim splits.
# See: https://github.com/christoomey/vim-tmux-navigator
is_vim="ps -o state= -o comm= -t '#{pane_tty}' \
    | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
bind-key -n 'C-h' if-shell "$is_vim" 'send-keys C-h'  'select-pane -L'
bind-key -n 'C-j' if-shell "$is_vim" 'send-keys C-j'  'select-pane -D'
bind-key -n 'C-k' if-shell "$is_vim" 'send-keys C-k'  'select-pane -U'
bind-key -n 'C-l' if-shell "$is_vim" 'send-keys C-l'  'select-pane -R'
tmux_version='$(tmux -V | sed -En "s/^tmux ([0-9]+(.[0-9]+)?).*/\1/p")'
if-shell -b '[ "$(echo "$tmux_version < 3.0" | bc)" = 1 ]' \
    "bind-key -n 'C-\\' if-shell \"$is_vim\" 'send-keys C-\\'  'select-pane -l'"
if-shell -b '[ "$(echo "$tmux_version >= 3.0" | bc)" = 1 ]' \
    "bind-key -n 'C-\\' if-shell \"$is_vim\" 'send-keys C-\\\\'  'select-pane -l'"

bind-key -T copy-mode-vi 'C-h' select-pane -L
bind-key -T copy-mode-vi 'C-j' select-pane -D
bind-key -T copy-mode-vi 'C-k' select-pane -U
bind-key -T copy-mode-vi 'C-l' select-pane -R
bind-key -T copy-mode-vi 'C-\' select-pane -l

#######################################################################
#                                                                     #
#                              Statusbar                              #
#                                                                     #
#######################################################################

set-option -g status-style 'bg=#373b41,fg=white,bold,italics'
set-option -g status-left-length 40
set-option -g status-left '#[fg=yellow,bold,italics]#S ยง ' # SECTION SIGN (UTF-8: c2 a7)
set-option -g status-right "#[fg=yellow,bold,italics]$USER@#h #[fg=magenta]%l:%M %p"
set-option -g status-interval 60 # Default is 15.

# Automatically renumber window numbers on closing a pane (tmux >= 1.7).
set-option -g renumber-windows on

# Highlight active window.
set-option -w -g window-status-current-style bg=red

# Make widths constant with or without flags.
set-option -w -g window-status-current-format ' #I:#W#F '
set-option -w -g window-status-format ' #I:#W#{?#{==:#F,},  ,#F }'
